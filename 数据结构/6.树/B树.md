# B-树 和 B+树

## B 树, B-树, B+树

### B 树, 是一种多路搜索树, 并不是二叉的.

- `B-tree` 树就是B 树, 就是 balanced tree.
- 任意非 Leaf 节点最多只有 M 个 child 节点. 且M>2;
- 根节点的 child 数为 [2, M], 即 ==**2 ≤ root`child ≤ M**==







## B-树

B-树, 这里的 B 表示 balance(平衡), B-树 是一种 ==多路自平衡的搜索树(不是二叉树)==. 它类似普通的二叉树. 不同的一点是 ==**B-树允许每个节点有更多的子节点**==.

<img src="../../local/picture/B-树和 B+树/image-20200609235330505.png" alt="image-20200609235330505" style="zoom:50%;" />

B-树有如下特点:

- 所有键值分布在整棵树中.
- 任何一个关键字出现且出现在一个节点中.
- 搜索有可能在非叶子节点结束.
- 在关键字全集内做一次查找, 性能逼近二分查找.



## B+树

<img src="/Users/cy/develop/doc/local/picture/B树/image-20200709095253718.png" alt="image-20200709095253718" style="zoom:50%;" />

1. 父节点的数据都出现在子节点中, 并且是子节点的最大/最小元素. 既然父节点的元素都出现在子节点中, 所以所有叶子节点就包含了所有的数据.
2. 并且每个叶子节点都有指向下一个节点的指针, 形成了有序链表.
3. B+ 树的非叶子节点不存放数据, 存放的是键值, Innodb 的页默认大小是 16KB, 所以可以存放更多的键值. 就意味着在同样数据量的情况下, B+ 树的高度会更加的低, 因此查询的时候会减少 IO 次数.
4. 由于所有叶子节点有全部的数据, 所以B+ 树每次查询都必须查询到叶子节点, 相对于 B-树来说, 性能更加稳定.(B-树的非叶子节点也有数据, 所以最好的情况是只查询到根节点, 最坏的情况是查询到叶子节点, 性能相对来说, 没有 B+ 树稳定).
5. 查询范围, B+ 树的叶子节点形成了有序链表, 便于范围查询